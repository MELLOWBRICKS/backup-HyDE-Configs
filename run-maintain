#!/bin/bash

# Update system with pacman
sudo echo "ğŸ”„ Updating system with pacman..."
sudo pacman -Syu --noconfirm

# Update AUR packages with yay
echo "
ğŸš€ Updating AUR packages with yay..."
yay -Syu --noconfirm

# Update flatpak packages
echo "
ğŸ“¦ Updating flatpak packages..."
flatpak update --assumeyes

# Remove orphaned packages
echo "
ğŸ—‘ï¸ Removing orphaned packages..."
sudo pacman -Rns $(pacman -Qtdq) --noconfirm 2>/dev/null || echo "âœ… No orphaned packages found."

# Remove untracked files from home directory (e.g., AUR build artifacts)
echo "
ğŸ—‘ï¸ Removing untracked files from home directory..."
rm -rf ~/.cache/yay/* 2>/dev/null || true
sudo rm -rf /var/tmp/*
sudo rm -rf /tmp/*

# Clean flatpak unused runtimes
echo "
ğŸ§½ Cleaning unused flatpak runtimes..."
flatpak uninstall --unused --assumeyes

echo "
ğŸ‰ System update and cleanup complete!"
